---
source_url: https://www.experian.com/static/analytics/at.js
authority_level: secondary
jurisdiction: US
retrieved_at: 2026-02-09T07:58:10.612407+00:00
last_updated: Mon, 08 Dec 2025 19:41:42 GMT
---
if(!window.visitor)var e=function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e,t,n){var r=null==e?void 0:e[t];return void 0===r?n:r}function r(e,t){if(e===t)return 0;var n=e.toString().split("."),r=t.toString().split(".");return function(e){for(var t=/^\d+$/,n=0,r=e.length;ni)return 1;if(i>r)return-1}return 0}(n,r)):NaN}function i(e){this.name=this.constructor.name,this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}function o(){function e(e,t){var n=ie(e);return n.length?n.every((function(e){return!!t[e]})):oe(t)}function t(){O(A),D(z.COMPLETE),g(m.status,m.permissions),u&&v.set(m.permissions,{optInCookieDomain:c,optInStorageExpiry:s,secure:f,sameSite:d}),y.execute(be)}function n(e){return function(n,r){if(!ae(n))throw new Error("[OptIn] Invalid category(-ies). Please use the `OptIn.Categories` enum.");return D(z.CHANGED),Object.assign(A,ue(ie(n),e)),r||t(),m}}var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.doesOptInApply,o=r.previousPermissions,a=r.preOptInApprovals,u=r.isOptInStorageEnabled,c=r.optInCookieDomain,s=r.optInStorageExpiry,l=r.isIabContext,f=r.secureCookie,d=r.sameSiteCookie,p=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cookies,h=ve(o);me(h,"Invalid `previousPermissions`!"),me(a,"Invalid `preOptInApprovals`!");var v=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).cookieName,t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).cookies;if(!e||!t)return{get:he,set:he,remove:he};var n={remove:function(){t.remove(e)},get:function(){var n=t.get(e),r={};try{r=JSON.parse(n)}catch(n){r={}}return r},set:function(r,i){i=i||{};var o=n.get(),a=Object.assign(o,r);t.set(e,JSON.stringify(a),{domain:i.optInCookieDomain||"",cookieLifetime:i.optInStorageExpiry||3419e4,secure:i.secure,sameSite:i.sameSite,expires:!0})}};return n}({cookieName:"adobeujs-optin"},{cookies:p}),m=this,g=G(m),y=X(),b=le(h),S=le(a),C=u?v.get():{},_={},I=function(e,t){return fe(e)||t&&fe(t)?z.COMPLETE:z.PENDING}(b,C),E=function(e,t,n){var r=ue(K,!i);return i?Object.assign({},r,e,t,n):r}(S,b,C),A=ce(E),D=function(e){return I=e},O=function(e){return E=e};m.deny=n(!1),m.approve=n(!0),m.denyAll=m.deny.bind(m,K),m.approveAll=m.approve.bind(m,K),m.isApproved=function(t){return e(t,m.permissions)},m.isPreApproved=function(t){return e(t,S)},m.fetchPermissions=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?m.on(z.COMPLETE,e):he;return!i||i&&m.isComplete||a?e(m.permissions):t||y.add(be,(function(){return e(m.permissions)})),n},m.complete=function(){m.status===z.CHANGED&&t()},m.registerPlugin=function(e){if(!e||!e.name||"function"!=typeof e.onRegister)throw new Error(Se);_[e.name]||(_[e.name]=e,e.onRegister.call(e,m))},m.execute=ye(_),m.memoizeContent=function(e){pe(e)&&v.set(e,{optInCookieDomain:c,optInStorageExpiry:s,secure:f,sameSite:d})},m.getMemoizedContent=function(e){var t=v.get();if(t)return t[e]},Object.defineProperties(m,{permissions:{get:function(){return E}},status:{get:function(){return I}},Categories:{get:function(){return Y}},doesOptInApply:{get:function(){return!!i}},isPending:{get:function(){return m.status===z.PENDING}},isComplete:{get:function(){return m.status===z.COMPLETE}},__plugins:{get:function(){return Object.keys(_)}},isIabContext:{get:function(){return l}}})}function a(e,t){if(void 0===t)return e;var n=setTimeout((function(){n=null,e.call(e,new i("The call took longer than you wanted!"))}),t);return function(){n&&(clearTimeout(n),e.apply(e,arguments))}}function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=!0===e.vendor.consents[t],i=n.every((function(t){return!0===e.purpose.consents[t]}));return r&&i}var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};Object.assign=Object.assign||function(e){for(var t,n,r=1;r=0||t.indexOf("Trident/")>=0&&t.indexOf("Windows NT 6")>=0}()?7:null},n.isFirefox=function(e){return!!/Firefox\/([0-9\.]+)(?:\s|$)/.test(e||window.navigator.userAgent)},n.encodeAndBuildRequest=function(e,t){return e.map(encodeURIComponent).join(t)},n.isObject=function(t){return null!==t&&"object"===e(t)&&!1===Array.isArray(t)},n.defineGlobalNamespace=function(){return window.adobe=n.isObject(window.adobe)?window.adobe:{},window.adobe},n.pluck=function(e,t){return t.reduce((function(t,n){return e[n]&&(t[n]=e[n]),t}),Object.create(null))},n.parseOptOut=function(e,t,n){t||(t=n,e.d_optout&&e.d_optout instanceof Array&&(t=e.d_optout.join(",")));var r=parseInt(e.d_ottl,10);return isNaN(r)&&(r=7200),{optOut:t,d_ottl:r}},n.normalizeBoolean=function(e){var t=e;return"true"===e?t=!0:"false"===e&&(t=!1),t}})),C=(S.isObjectEmpty,S.isValueEmpty,S.getIeVersion,S.isFirefox,S.encodeAndBuildRequest,S.isObject,S.defineGlobalNamespace,S.pluck,S.parseOptOut,S.normalizeBoolean,function(){return{callbacks:{},add:function(e,t){this.callbacks[e]=this.callbacks[e]||[];var n=this.callbacks[e].push(t)-1,r=this;return function(){r.callbacks[e].splice(n,1)}},execute:function(e,t){if(this.callbacks[e]){t=(t=void 0===t?[]:t)instanceof Array?t:[t];try{for(;this.callbacks[e].length;){var n=this.callbacks[e].shift();"function"==typeof n?n.apply(null,t):n instanceof Array&&n[1].apply(n[0],t)}delete this.callbacks[e]}catch(e){}}},executeAll:function(e,t){(t||e&&!S.isObjectEmpty(e))&&Object.keys(this.callbacks).forEach((function(t){var n=void 0!==e[t]?e[t]:"";this.execute(t,n)}),this)},hasCallbacks:function(){return Boolean(Object.keys(this.callbacks).length)}}}),_=f.MESSAGES,I={0:"prefix",1:"orgID",2:"state"},E=function(e,t){this.parse=function(e){try{var t={};return e.data.split("|").forEach((function(e,n){void 0!==e&&(t[I[n]]=2!==n?e:JSON.parse(e))})),t}catch(e){}},this.isInvalid=function(n){var r=this.parse(n);if(!r||Object.keys(r).length<2)return!0;var i=e!==r.orgID,o=!t||n.origin!==t,a=-1===Object.keys(_).indexOf(r.prefix);return i||o||a},this.send=function(n,r,i){var o=r+"|"+e;i&&i===Object(i)&&(o+="|"+JSON.stringify(i));try{n.postMessage(o,t)}catch(e){}}},A=f.MESSAGES,D=function(e,t,n,r){function i(e){Object.assign(l,e)}function o(e){if(!h.isInvalid(e)){d=!1;var t=h.parse(e);l.setStateAndPublish(t.state)}}function a(e){!d&&f&&(d=!0,h.send(r,e))}function u(){i(new p(n._generateID)),l.getMarketingCloudVisitorID(),l.callbackRegistry.executeAll(l.state,!0),c.removeEventListener("message",s)}function s(e){if(!h.isInvalid(e)){var t=h.parse(e);d=!1,c.clearTimeout(l._handshakeTimeout),c.removeEventListener("message",s),i(new g(l)),c.addEventListener("message",o),l.setStateAndPublish(t.state),l.callbackRegistry.hasCallbacks()&&a(A.GETSTATE)}}var l=this,f=t.whitelistParentDomain;l.state={ALLFIELDS:{}},l.version=n.version,l.marketingCloudOrgID=e,l.cookieDomain=n.cookieDomain||"",l._instanceType="child";var d=!1,h=new E(e,f);l.callbackRegistry=C(),l.init=function(){c.s_c_in||(c.s_c_il=[],c.s_c_in=0),l._c="Visitor",l._il=c.s_c_il,l._in=c.s_c_in,l._il[l._in]=l,c.s_c_in++,Object.keys(n).forEach((function(e){0!==e.indexOf("_")&&"function"==typeof n[e]&&(l[e]=function(){})})),l.getSupplementalDataID=n.getSupplementalDataID,l.isAllowed=function(){return!0},i(new b(l)),f&&postMessage?(c.addEventListener("message",s),a(A.HANDSHAKE),l._handshakeTimeout=setTimeout(u,250)):u()},l.findField=function(e,t){if(void 0!==l.state[e])return t(l.state[e]),l.state[e]},l.messageParent=a,l.setStateAndPublish=function(e){Object.assign(l.state,e),Object.assign(l.state.ALLFIELDS,e),l.callbackRegistry.executeAll(l.state)}},O=f.MESSAGES,k=f.ALL_APIS,T=f.ASYNC_API_MAP,x=f.FIELDGROUP_TO_FIELD,M=function(e,t){function n(){var t={};return Object.keys(k).forEach((function(n){var r=k[n],i=e[r]();S.isValueEmpty(i)||(t[n]=i)})),t}function r(t){return function n(r){var i=function(){var t=[];return e._loading&&Object.keys(e._loading).forEach((function(n){if(e._loading[n]){var r=x[n];t.push(r)}})),t.length?t:null}();if(i){var o=T[i[0]];e[o](n,!0)}else t()}}function i(e,r){var i=n();t.send(e,r,i)}function o(e){u(e),i(e,O.HANDSHAKE)}function a(e){r((function(){i(e,O.PARENTSTATE)}))()}function u(n){var r=e.setCustomerIDs;e.setCustomerIDs=function(i){r.call(e,i),t.send(n,O.PARENTSTATE,{CUSTOMERIDS:e.getCustomerIDs()})}}return function(e){t.isInvalid(e)||(t.parse(e).prefix===O.HANDSHAKE?o:a)(e.source)}},w={get:function(e){e=encodeURIComponent(e);var t=(";"+document.cookie).split(" ").join(";"),n=t.indexOf(";"+e+"="),r=n<0?n:t.indexOf(";",n+1);return n<0?"":decodeURIComponent(t.substring(n+2+e.length,r<0?t.length:r))},set:function(e,t,r){var i=n(r,"cookieLifetime"),o=n(r,"expires"),a=n(r,"domain"),u=n(r,"secure"),c=n(r,"sameSite"),s=u?"Secure":"",l=c?"SameSite="+c+";":"";if(o&&"SESSION"!==i&&"NONE"!==i){var f=""!==t?parseInt(i||0,10):-60;if(f)(o=new Date).setTime(o.getTime()+1e3*f);else if(1===o){var d=(o=new Date).getYear();o.setYear(d+2+(d<1900?1900:0))}}else o=0;return e&&"NONE"!==i?(document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;"+(o?" expires="+o.toGMTString()+";":"")+(a?" domain="+a+";":"")+l+s,this.get(e)===t):0},remove:function(e,t){var r=n(t,"domain");r=r?" domain="+r+";":"";var i=n(t,"secure"),o=n(t,"sameSite"),a=i?"Secure":"",u=o?"SameSite="+o+";":"";document.cookie=encodeURIComponent(e)+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"+r+u+a}},P=function(e,t){!e&&c.location&&(e=c.location.hostname);var n,r=e.split("."),i=t||{};for(n=r.length-2;n>=0;n--)if(i.domain=r.slice(n).join("."),w.set("TEST_AMCV_COOKIE_WRITE","cookie",i))return w.remove("TEST_AMCV_COOKIE_WRITE",i),i.domain;return""},L=function(e,t){return r(e,t)<0},N=function(e,t){return 0!==r(e,t)},R=!!c.postMessage,j=function(e,t,n){var r=1;t&&(R?n.postMessage(e,t.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):t&&(n.location=t.replace(/#.*$/,"")+"#"+ +new Date+r+++"&"+e))},F=function(e,t){var n;try{R&&(e&&(n=function(n){if("string"==typeof t&&n.origin!==t||"[object Function]"===Object.prototype.toString.call(t)&&!1===t(n.origin))return!1;e(n)}),c.addEventListener?c[e?"addEventListener":"removeEventListener"]("message",n):c[e?"attachEvent":"detachEvent"]("onmessage",n))}catch(e){}},V=function(e){var t,n,r="0123456789",i="",o="",a=8,u=10,c=10,s=(""+Date.now()).substr(-6).split("").reverse("").join("");if(1==e){for(r+="ABCDEF",t=0;16>t;t++)n=Math.floor(Math.random()*a),4>t&&s[t]t;t++)n=Math.floor(Math.random()*u),6>t&&s[t]n||2n||20&&(t=!1)),{corsType:e,corsCookiesEnabled:t}}(),getCORSInstance:function(){return"none"===this.corsMetadata.corsType?null:new c[this.corsMetadata.corsType]},fireCORS:function(t,n,r){var i=this;n&&(t.loadErrorHandler=n);try{var o=this.getCORSInstance();o.open("get",t.corsUrl+"&ts="+(new Date).getTime(),!0),"XMLHttpRequest"===this.corsMetadata.corsType&&(o.withCredentials=!0,o.timeout=e.loadTimeout,o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4===this.readyState&&200===this.status&&function(e){var n;try{if((n=JSON.parse(e))!==Object(n))return void i.handleCORSError(t,null,"Response is not JSON")}catch(e){return void i.handleCORSError(t,e,"Error parsing response as JSON")}try{for(var r=t.callback,o=c,a=0;a0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};this.log=Q("log",e,t),this.warn=Q("warn",e,t),this.error=Q("error",e,t)},te=function(){for(var e=[],t=0;t<256;t++){for(var n=t,r=0;r<8;r++)n=1&n?3988292384^n>>>1:n>>>1;e.push(n)}return function(t,n){t=unescape(encodeURIComponent(t)),n||(n=0),n^=-1;for(var r=0;r>>8^e[i]}return(n^=-1)>>>0}}(),ne=new ee("[ADOBE OPT-IN]"),re=function(t,n){return e(t)===n},ie=function(e,t){return e instanceof Array?e:re(e,"string")?[e]:t||[]},oe=function(e){var t=Object.keys(e);return!!t.length&&t.every((function(t){return!0===e[t]}))},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(!e||se(e))&&ie(e).every((function(e){return K.indexOf(e)>-1||t&&W.indexOf(e)>-1}))},ue=function(e,t){return e.reduce((function(e,n){return e[n]=t,e}),{})},ce=function(e){return JSON.parse(JSON.stringify(e))},se=function(e){return"[object Array]"===Object.prototype.toString.call(e)&&!e.length},le=function(e){if(pe(e))return e;try{return JSON.parse(e)}catch(e){return{}}},fe=function(e){return void 0===e||(pe(e)?ae(Object.keys(e),!0):de(e))},de=function(e){try{var t=JSON.parse(e);return!!e&&re(e,"string")&&ae(Object.keys(t),!0)}catch(e){return!1}},pe=function(e){return null!==e&&re(e,"object")&&!1===Array.isArray(e)},he=function(){},ve=function(e){return re(e,"function")?e():e},me=function(e,t){fe(e)||ne.error("".concat(t))},ge=function(e){return function(e){return Object.keys(e).map((function(t){return e[t]}))}(e).filter((function(e,t,n){return n.indexOf(e)===t}))},ye=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.command,r=t.params,i=void 0===r?{}:r,o=t.callback,a=void 0===o?he:o;if(!n||-1===n.indexOf("."))throw new Error("[OptIn.execute] Please provide a valid command.");try{var u=n.split("."),c=e[u[0]],s=u[1];if(!c||"function"!=typeof c[s])throw new Error("Make sure the plugin and API name exist.");var l=Object.assign(i,{callback:a});c[s].call(c,l)}catch(e){ne.error("[execute] Something went wrong: "+e.message)}}};i.prototype=Object.create(Error.prototype),i.prototype.constructor=i;var be="fetchPermissions",Se="[OptIn#registerPlugin] Plugin is invalid.";o.Categories=Y,o.TimeoutError=i;var Ce=Object.freeze({OptIn:o,IabPlugin:function(){var e=this;e.name="iabPlugin",e.version="0.0.2";var t,n=X(),r={transparencyAndConsentData:null};e.fetchConsentData=function(e){var t=a(e.callback,e.timeout);i({callback:t})},e.isApproved=function(e){var t=e.callback,n=e.category,o=e.timeout;if(r.transparencyAndConsentData)return t(null,u(r.transparencyAndConsentData,J[n],$[n]));var c=a((function(e,r){t(e,u(r,J[n],$[n]))}),o);i({category:n,callback:c})},e.onRegister=function(n){t=n;var r=Object.keys(J);e.fetchConsentData({callback:function(e,t){!e&&t&&(r.forEach((function(e){var r=u(t,J[e],$[e]);n[r?"approve":"deny"](e,!0)})),n.complete())}})};var i=function(e){var i=e.callback;if(r.transparencyAndConsentData)return i(null,r.transparencyAndConsentData);n.add("FETCH_CONSENT_DATA",i),o((function(e,i){if(i){var o=ce(e),a=t.getMemoizedContent("iabConsentHash"),u=te(o.tcString).toString(32);o.consentString=e.tcString,o.hasConsentChangedSinceLastCmpPull=a!==u,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r[e]=t}("transparencyAndConsentData",o),t.memoizeContent({iabConsentHash:u})}n.execute("FETCH_CONSENT_DATA",[null,r.transparencyAndConsentData])}))},o=function(e){var t=ge(J),n=function(){if(window.__tcfapi)return window.__tcfapi;var e=window;if(e!==window.top){for(var t;!t;){e=e.parent;try{e.frames.__tcfapiLocator&&(t=e)}catch(e){}if(e===window.top)break}if(t){var n={};return window.__tcfapi=function(e,r,i,o){var a=Math.random()+"",u={__tcfapiCall:{command:e,parameter:o,version:r,callId:a}};n[a]=i,t.postMessage(u,"*")},window.addEventListener("message",(function(e){var t=e.data;if("string"==typeof t)try{t=JSON.parse(e.data)}catch(e){}if(t.__tcfapiReturn){var r=t.__tcfapiReturn;"function"==typeof n[r.callId]&&(n[r.callId](r.returnValue,r.success),delete n[r.callId])}}),!1),window.__tcfapi}ne.error("__tcfapi not found")}else ne.error("__tcfapi not found")}();"function"==typeof n&&n("getTCData",2,e,t)}}}),_e=function e(t){function n(e,t){return e>>>t|e<<32-t}for(var r,i,o=Math.pow,a=o(2,32),u="",c=[],s=8*t.length,l=e.h=e.h||[],f=e.k=e.k||[],d=f.length,p={},h=2;d<64;h++)if(!p[h]){for(r=0;r<313;r+=h)p[r]=h;l[d]=o(h,.5)*a|0,f[d++]=o(h,1/3)*a|0}for(t+="Â";t.length%64-56;)t+="\0";for(r=0;r>8)return;c[r>>2]|=i<<(3-r)%4*8}for(c[c.length]=s/a|0,c[c.length]=s,i=0;i>>3)+v[r-7]+(n(y,17)^n(y,19)^y>>>10)|0);(l=[C+((n(b,2)^n(b,13)^n(b,22))+(b&l[1]^b&l[2]^l[1]&l[2]))|0].concat(l))[4]=l[4]+C|0}for(r=0;r<8;r++)l[r]=l[r]+m[r]|0}for(r=0;r<8;r++)for(i=3;i+1;i--){var _=l[r]>>8*i&255;u+=(_<16?0:"")+_.toString(16)}return u},Ie=function(e,t){return"SHA-256"!==t&&"SHA256"!==t&&"sha256"!==t&&"sha-256"!==t||(e=_e(e)),e},Ee=function(e){return String(e).trim().toLowerCase()},Ae=Ce.OptIn;S.defineGlobalNamespace(),window.adobe.OptInCategories=Ae.Categories;var De=function(t,n,r){function i(){m._customerIDsHashChanged=!1}function o(e){var t=e;return function(e){var n=e||I.location.href;try{var r=m._extractParamFromUri(n,t);if(r)return K.parsePipeDelimetedKeyValues(r)}catch(e){}}}function a(e){e=e||{},m._supplementalDataIDCurrent=e.supplementalDataIDCurrent||"",m._supplementalDataIDCurrentConsumed=e.supplementalDataIDCurrentConsumed||{},m._supplementalDataIDLast=e.supplementalDataIDLast||"",m._supplementalDataIDLastConsumed=e.supplementalDataIDLastConsumed||{}}function u(e){var t=e.reduce((function(e,t){var n=t[0],r=t[1];return null!=r&&r!==z&&(e=function(e,t,n){return(n=n?n+="|":n)+(e+"=")+encodeURIComponent(t)}(n,r,e)),e}),"");return function(e){return(e=e?e+="|":e)+"TS="+K.getTimestampInSeconds()}(t)}function s(){return m.configs.doesOptInApply&&m.configs.isIabContext?g.optIn.isApproved(g.optIn.Categories.ECID)&&C:g.optIn.isApproved(g.optIn.Categories.ECID)}function l(){[["getMarketingCloudVisitorID"],["setCustomerIDs",void 0],["syncIdentity",void 0],["getAnalyticsVisitorID"],["getAudienceManagerLocationHint"],["getLocationHint"],["getAudienceManagerBlob"]].forEach((function(e){var t=e[0],n=2===e.length?e[1]:"",r=m[t];m[t]=function(e){return s()&&m.isAllowed()?r.apply(m,arguments):("function"==typeof e&&m._callCallback(e,[n]),n)}}))}function d(e,t){if(C=!0,e)throw new Error("[IAB plugin] : "+e);t&&t.gdprApplies&&(y=t.consentString,b=t.hasConsentChangedSinceLastCmpPull?1:0),function(){var e=m._getAudienceManagerURLData(),t=e.url;m._loadData(k,t,null,e)}(),v()}function p(e,t){if(C=!0,e)throw new Error("[IAB plugin] : "+e);t.gdprApplies&&(y=t.consentString,b=t.hasConsentChangedSinceLastCmpPull?1:0),m.init(),v()}function h(){g.optIn.isComplete&&(g.optIn.isApproved(g.optIn.Categories.ECID)?m.configs.isIabContext?g.optIn.execute({command:"iabPlugin.fetchConsentData",callback:p}):(m.init(),v()):m.configs.isIabContext?g.optIn.execute({command:"iabPlugin.fetchConsentData",callback:d}):(l(),v()))}function v(){g.optIn.off("complete",h)}if(!r||r.split("").reverse().join("")!==t)throw new Error("Please use `Visitor.getInstance` to instantiate Visitor.");var m=this,g=window.adobe,y="",b=0,C=!1,_=!1;m.version="5.5.0";var I=c,A=I.Visitor;A.version=m.version,A.AuthState=f.AUTH_STATE,A.OptOut=f.OPT_OUT,I.s_c_in||(I.s_c_il=[],I.s_c_in=0),m._c="Visitor",m._il=I.s_c_il,m._in=I.s_c_in,m._il[m._in]=m,I.s_c_in++,m._instanceType="regular",m._log={requests:[]},m.marketingCloudOrgID=t,m.cookieName="AMCV_"+t,m.sessionCookieName="AMCVS_"+t;var D={};n&&n.secureCookie&&n.sameSiteCookie&&(D={sameSite:n.sameSiteCookie,secure:n.secureCookie}),m.cookieDomain=m.useLocalStorage?"":P(null,D),m.loadSSL=!0,m.loadTimeout=3e4,m.CORSErrors=[],m.marketingCloudServer=m.audienceManagerServer="dpm.demdex.net",m.sdidParamExpiry=30;var O=null,k="MC",T="MCMID",x="MCIDTS",R="A",H="MCAID",B="AAM",G="MCAAMB",z="NONE",Y=function(e){return!Object.prototype[e]},J=U(m);m.FIELDS=f.FIELDS,m.cookieRead=function(e){return m.useLocalStorage?e===m.sessionCookieName?sessionStorage.getItem(e):localStorage.getItem(e):w.get(e)},m.cookieWrite=function(e,t,n){var r=""+t;if(m.useLocalStorage)return e===m.sessionCookieName?sessionStorage.setItem(e,r):localStorage.setItem(e,r);var i=m.cookieLifetime?(""+m.cookieLifetime).toUpperCase():"",o={expires:n,domain:m.cookieDomain,cookieLifetime:i};return m.configs&&m.configs.secureCookie&&"https:"===location.protocol&&(o.secure=!0),m.configs&&m.configs.sameSiteCookie&&"https:"===location.protocol&&(o.sameSite=f.SAME_SITE_VALUES[m.configs.sameSiteCookie.toUpperCase()]||"Lax"),w.set(e,r,o)},m.removeCookie=function(e){if(m.useLocalStorage)return e===m.sessionCookieName?sessionStorage.removeItem(e):localStorage.removeItem(e);var t={domain:m.cookieDomain};return m.configs&&m.configs.secureCookie&&"https:"===location.protocol&&(t.secure=!0),m.configs&&m.configs.sameSiteCookie&&"https:"===location.protocol&&(t.sameSite=f.SAME_SITE_VALUES[m.configs.sameSiteCookie.toUpperCase()]||"Lax"),w.remove(e,t)},m.resetState=function(e){e?m._mergeServerState(e):a()},m._isAllowedDone=!1,m._isAllowedFlag=!1,m.isAllowed=function(){return m._isAllowedDone||(m._isAllowedDone=!0,(m.cookieRead(m.cookieName)||m.cookieWrite(m.cookieName,"T",1))&&(m._isAllowedFlag=!0)),"T"===m.cookieRead(m.cookieName)&&m.removeCookie(m.cookieName),m._isAllowedFlag},m.setMarketingCloudVisitorID=function(e){m._setMarketingCloudFields(e)},m._use1stPartyMarketingCloudServer=!1,m.getMarketingCloudVisitorID=function(e,t){m.marketingCloudServer&&m.marketingCloudServer.indexOf(".demdex.net")<0&&(m._use1stPartyMarketingCloudServer=!0);var n=m._getAudienceManagerURLData("_setMarketingCloudFields"),r=n.url;return m._getRemoteField(T,r,e,t,n)};m.getVisitorValues=function(e,t){var n={MCMID:{fn:m.getMarketingCloudVisitorID,args:[!0],context:m},MCOPTOUT:{fn:m.isOptedOut,args:[void 0,!0],context:m},MCAID:{fn:m.getAnalyticsVisitorID,args:[!0],context:m},MCAAMLH:{fn:m.getAudienceManagerLocationHint,args:[!0],context:m},MCAAMB:{fn:m.getAudienceManagerBlob,args:[!0],context:m}},r=t&&t.length?S.pluck(n,t):n;t&&-1===t.indexOf("MCAID")?function(e,t){var n={};m.getMarketingCloudVisitorID((function(){t.forEach((function(e){n[e]=m._getField(e,!0)})),-1!==t.indexOf("MCOPTOUT")?m.isOptedOut((function(t){n.MCOPTOUT=t,e(n)}),null,!0):e(n)}),!0)}(e,t):function(e,t){function n(e){return function(n){r[e]=n,++i===o&&t(r)}}var r={},i=0,o=Object.keys(e).length;Object.keys(e).forEach((function(t){var r=e[t];if(r.fn){var i=r.args||[];i.unshift(n(t)),r.fn.apply(r.context||null,i)}}))}(r,e)},m._currentCustomerIDs={},m._customerIDsHashChanged=!1,m._newCustomerIDsHash="",m.setCustomerIDs=function(t,n){if(!m.isOptedOut()&&t){if(!S.isObject(t)||S.isObjectEmpty(t))return!1;var r,o,a,u;for(r in m._readVisitor(),t)if(Y(r)&&(m._currentCustomerIDs.dataSources=m._currentCustomerIDs.dataSources||{},n=(o=t[r]).hasOwnProperty("hashType")?o.hashType:n,o))if("object"===e(o)){var c={};if(o.id){if(n){if(!(u=Ie(Ee(o.id),n)))return;o.id=u,c.hashType=n}c.id=o.id}null!=o.authState&&(c.authState=o.authState),m._currentCustomerIDs.dataSources[r]=c}else if(n){if(!(u=Ie(Ee(o),n)))return;m._currentCustomerIDs.dataSources[r]={id:u,hashType:n}}else m._currentCustomerIDs.dataSources[r]={id:o};var s=m.getCustomerIDs(!0),l=m._getField("MCCIDH"),f="";for(a in l||(l=0),s){var d=s[a];if(!S.isObjectEmpty(d))for(r in d)Y(r)&&(f+=(f?"|":"")+r+"|"+((o=d[r]).id?o.id:"")+(o.authState?o.authState:""))}m._newCustomerIDsHash=String(m._hash(f)),m._newCustomerIDsHash!==l&&(m._customerIDsHashChanged=!0,m._mapCustomerIDs(i))}},m.syncIdentity=function(t,n){if(!m.isOptedOut()&&t){if(!S.isObject(t)||S.isObjectEmpty(t))return!1;var r,o,a,u,c;for(r in m._readVisitor(),t)if(Y(r)&&(m._currentCustomerIDs.nameSpaces=m._currentCustomerIDs.nameSpaces||{},n=(o=t[r]).hasOwnProperty("hashType")?o.hashType:n,o&&"object"===e(o))){var s={};if(o.id){if(n){if(!(a=Ie(Ee(o.id),n)))return;o.id=a,s.hashType=n}s.id=o.id}null!=o.authState&&(s.authState=o.authState),o.dataSource&&(m._currentCustomerIDs.dataSources=m._currentCustomerIDs.dataSources||{},u=o.dataSource,m._currentCustomerIDs.dataSources[u]=s),m._currentCustomerIDs.nameSpaces[r]=s}var l=m.getCustomerIDs(!0),f=m._getField("MCCIDH"),d="";for(c in f||(f="0"),l){var p=l[c];if(!S.isObjectEmpty(p))for(r in p)Y(r)&&(d+=(d?"|":"")+r+"|"+((o=p[r]).id?o.id:"")+(o.authState?o.authState:""))}m._newCustomerIDsHash=String(m._hash(d)),m._newCustomerIDsHash!==f&&(m._customerIDsHashChanged=!0,m._mapCustomerIDs(i))}},m.getCustomerIDs=function(e){m._readVisitor();var t,n,r={dataSources:{},nameSpaces:{}},i=m._currentCustomerIDs.dataSources;for(t in i)Y(t)&&((n=i[t]).id&&(r.dataSources[t]||(r.dataSources[t]={}),r.dataSources[t].id=n.id,null!=n.authState?r.dataSources[t].authState=n.authState:r.dataSources[t].authState=A.AuthState.UNKNOWN,n.hashType&&(r.dataSources[t].hashType=n.hashType)));var o=m._currentCustomerIDs.nameSpaces;for(t in o)Y(t)&&((n=o[t]).id&&(r.nameSpaces[t]||(r.nameSpaces[t]={}),r.nameSpaces[t].id=n.id,null!=n.authState?r.nameSpaces[t].authState=n.authState:r.nameSpaces[t].authState=A.AuthState.UNKNOWN,n.hashType&&(r.nameSpaces[t].hashType=n.hashType)));return e?r:r.dataSources},m.setAnalyticsVisitorID=function(e){m._setAnalyticsFields(e)},m.getAnalyticsVisitorID=function(e,t,n){if(!K.isTrackingServerPopulated()&&!n)return m._callCallback(e,[""]),"";var r="";if(n||(r=m.getMarketingCloudVisitorID((function(t){m.getAnalyticsVisitorID(e,!0)}))),r||n){var i=n?m.marketingCloudServer:m.trackingServer,o="";m.loadSSL&&(n?m.marketingCloudServerSecure&&(i=m.marketingCloudServerSecure):m.trackingServerSecure&&(i=m.trackingServerSecure));var a={};if(i){var u="http"+(m.loadSSL?"s":"")+"://"+i+"/id",c=m.configs.cookieLifetime,s="d_visid_ver="+m.version+"&mcorgid="+encodeURIComponent(m.marketingCloudOrgID)+(r?"&mid="+encodeURIComponent(r):"")+(c?"&cl="+encodeURIComponent(c):"")+(m.idSyncDisable3rdPartySyncing||m.disableThirdPartyCookies?"&d_coppa=true":""),l=["s_c_il",m._in,"_set"+(n?"MarketingCloud":"Analytics")+"Fields"];o=u+"?"+s+"&callback=s_c_il%5B"+m._in+"%5D._set"+(n?"MarketingCloud":"Analytics")+"Fields",a.corsUrl=u+"?"+s,a.callback=l}return a.url=o,m._getRemoteField(n?T:H,o,e,t,a)}return""},m.getAudienceManagerLocationHint=function(e,t){if(m.getMarketingCloudVisitorID((function(t){m.getAudienceManagerLocationHint(e,!0)}))){var n=m._getField(H);if(!n&&K.isTrackingServerPopulated()&&(n=m.getAnalyticsVisitorID((function(t){m.getAudienceManagerLocationHint(e,!0)}))),n||!K.isTrackingServerPopulated()){var r=m._getAudienceManagerURLData(),i=r.url;return m._getRemoteField("MCAAMLH",i,e,t,r)}}return""},m.getLocationHint=m.getAudienceManagerLocationHint,m.getAudienceManagerBlob=function(e,t){if(m.getMarketingCloudVisitorID((function(t){m.getAudienceManagerBlob(e,!0)}))){var n=m._getField(H);if(!n&&K.isTrackingServerPopulated()&&(n=m.getAnalyticsVisitorID((function(t){m.getAudienceManagerBlob(e,!0)}))),n||!K.isTrackingServerPopulated()){var r=m._getAudienceManagerURLData(),i=r.url;return m._customerIDsHashChanged&&m._setFieldExpire(G,-1),m._getRemoteField(G,i,e,t,r)}}return""},m._supplementalDataIDCurrent="",m._supplementalDataIDCurrentConsumed={},m._supplementalDataIDLast="",m._supplementalDataIDLastConsumed={},m.getSupplementalDataID=function(e,t){m._supplementalDataIDCurrent||t||(m._supplementalDataIDCurrent=m._generateID(1));var n=m._supplementalDataIDCurrent;return m._supplementalDataIDLast&&!m._supplementalDataIDLastConsumed[e]?(n=m._supplementalDataIDLast,m._supplementalDataIDLastConsumed[e]=!0):n&&(m._supplementalDataIDCurrentConsumed[e]&&(m._supplementalDataIDLast=m._supplementalDataIDCurrent,m._supplementalDataIDLastConsumed=m._supplementalDataIDCurrentConsumed,m._supplementalDataIDCurrent=n=t?"":m._generateID(1),m._supplementalDataIDCurrentConsumed={}),n&&(m._supplementalDataIDCurrentConsumed[e]=!0)),n};var $=!1;m._liberatedOptOut=null,m.getOptOut=function(e,t){var n=m._getAudienceManagerURLData("_setMarketingCloudFields"),r=n.url;if(s())return m._getRemoteField("MCOPTOUT",r,e,t,n);if(m._registerCallback("liberatedOptOut",e),null!==m._liberatedOptOut)return m._callAllCallbacks("liberatedOptOut",[m._liberatedOptOut]),$=!1,m._liberatedOptOut;if($)return null;$=!0;var i="liberatedGetOptOut";return n.corsUrl=n.corsUrl.replace(/\.demdex\.net\/id\?/,".demdex.net/optOutStatus?"),n.callback=[i],c[i]=function(e){if(e===Object(e)){var t,n,r=S.parseOptOut(e,t,z);t=r.optOut,n=1e3*r.d_ottl,m._liberatedOptOut=t,setTimeout((function(){m._liberatedOptOut=null}),n)}m._callAllCallbacks("liberatedOptOut",[t]),$=!1},J.fireCORS(n),null},m.isOptedOut=function(e,t,n){t||(t=A.OptOut.GLOBAL);var r=m.getOptOut((function(n){var r=n===A.OptOut.GLOBAL||n.indexOf(t)>=0;m._callCallback(e,[r])}),n);return r?r===A.OptOut.GLOBAL||r.indexOf(t)>=0:null};var W={subscribed:!1,callbacks:[]};m.onReceiveEcid=function(e){if(s())return m.getMarketingCloudVisitorID(e,!0);W.subscribed=!0,e&&"function"==typeof e&&W.callbacks.push(e)},m._fields=null,m._fieldsExpired=null,m._hash=function(e){var t,n=0;if(e)for(t=0;t0;)m._callCallback(n.shift(),t)}},m._addQuerystringParam=function(e,t,n,r){var i=encodeURIComponent(t)+"="+encodeURIComponent(n),o=K.parseHash(e),a=K.hashlessUrl(e);if(-1===a.indexOf("?"))return a+"?"+i+o;var u=a.split("?"),c=u[0]+"?",s=u[1];return c+K.addQueryParamAtLocation(s,i,r)+o},m._extractParamFromUri=function(e,t){var n=new RegExp("[\\?]"+t+"=([^]*)").exec(e);if(n&&n.length)return decodeURIComponent(n[1])},m._parseAdobeMcFromUrl=o(q.ADOBE_MC),m._parseAdobeMcSdidFromUrl=o(q.ADOBE_MC_SDID),m._attemptToPopulateSdidFromUrl=function(e){var n=m._parseAdobeMcSdidFromUrl(e),r=1e9;n&&n.TS&&(r=K.getTimestampInSeconds()-n.TS),n&&n.SDID&&n.MCORGID===t&&rq.ADOBE_MC_TTL_IN_MIN||e.MCORGID!==t)return;!function(e){function t(e,t,n){e&&e.match(q.VALID_VISITOR_ID_REGEX)&&(n===T&&(_=!0),t(e))}t(e[T],m.setMarketingCloudVisitorID,T),m._setFieldExpire(G,-1),t(e[H],m.setAnalyticsVisitorID)}(e)}},m._mergeServerState=function(e){if(e)try{if((e=function(e){return K.isObject(e)?e:JSON.parse(e)}(e))[m.marketingCloudOrgID]){var t=e[m.marketingCloudOrgID];!function(e){K.isObject(e)&&m.setCustomerIDs(e)}(t.customerIDs),a(t.sdid)}}catch(e){throw new Error("`serverState` has an invalid format.")}},m._timeout=null,m._loadData=function(e,t,n,r){t=m._addQuerystringParam(t,"d_fieldgroup",e,1),r.url=m._addQuerystringParam(r.url,"d_fieldgroup",e,1),r.corsUrl=m._addQuerystringParam(r.corsUrl,"d_fieldgroup",e,1),Q.fieldGroupObj[e]=!0,r===Object(r)&&r.corsUrl&&"XMLHttpRequest"===J.corsMetadata.corsType&&J.fireCORS(r,n,e)},m._clearTimeout=function(e){null!=m._timeout&&m._timeout[e]&&(clearTimeout(m._timeout[e]),m._timeout[e]=0)},m._settingsDigest=0,m._getSettingsDigest=function(){if(!m._settingsDigest){var e=m.version;m.audienceManagerServer&&(e+="|"+m.audienceManagerServer),m.audienceManagerServerSecure&&(e+="|"+m.audienceManagerServerSecure),m._settingsDigest=m._hash(e)}return m._settingsDigest},m._readVisitorDone=!1,m._readVisitor=function(){if(!m._readVisitorDone){m._readVisitorDone=!0;var e,t,n,r,i,o,a=m._getSettingsDigest(),u=!1,c=m.cookieRead(m.cookieName),s=new Date;if(c||_||m.discardTrackingServerECID||(c=m.cookieRead(q.FIRST_PARTY_SERVER_COOKIE)),null==m._fields&&(m._fields={}),c&&"T"!==c)for((c=c.split("|"))[0].match(/^[\-0-9]+$/)&&(parseInt(c[0],10)!==a&&(u=!0),c.shift()),c.length%2==1&&c.pop(),e=0;e1?(i=parseInt(t[1],10),o=t[1].indexOf("s")>0):(i=0,o=!1),u&&("MCCIDH"===n&&(r=""),i>0&&(i=s.getTime()/1e3-60)),n&&r&&(m._setField(n,r,1),i>0&&(m._fields["expire"+n]=i+(o?"s":""),(s.getTime()>=1e3*i||o&&!m.cookieRead(m.sessionCookieName))&&(m._fieldsExpired||(m._fieldsExpired={}),m._fieldsExpired[n]=!0)));!m._getField(H)&&K.isTrackingServerPopulated()&&(c=m.cookieRead("s_vi"))&&((c=c.split("|")).length>1&&c[0].indexOf("v1")>=0&&((e=(r=c[1]).indexOf("["))>=0&&(r=r.substring(0,e)),r&&r.match(q.VALID_VISITOR_ID_REGEX)&&m._setField(H,r)))}},m._appendVersionTo=function(e){var t="vVersion|"+m.version,n=e?m._getCookieVersion(e):null;return n?N(n,m.version)&&(e=e.replace(q.VERSION_REGEX,t)):e+=(e?"|":"")+t,e},m._writeVisitor=function(){var e,t,n=m._getSettingsDigest();for(e in m._fields)Y(e)&&m._fields[e]&&"expire"!==e.substring(0,6)&&(t=m._fields[e],n+=(n?"|":"")+e+(m._fields["expire"+e]?"-"+m._fields["expire"+e]:"")+"|"+t);n=m._appendVersionTo(n),m.cookieWrite(m.cookieName,n,1)},m._getField=function(e,t){return null==m._fields||!t&&m._fieldsExpired&&m._fieldsExpired[e]?null:m._fields[e]},m._setField=function(e,t,n){null==m._fields&&(m._fields={}),m._fields[e]=t,n||m._writeVisitor()},m._getFieldList=function(e,t){var n=m._getField(e,t);return n?n.split("*"):null},m._setFieldList=function(e,t,n){m._setField(e,t?t.join("*"):"",n)},m._getFieldMap=function(e,t){var n=m._getFieldList(e,t);if(n){var r,i={};for(r=0;r0?e.substr(t):""},hashlessUrl:function(e){var t=e.indexOf("#");return t>0?e.substr(0,t):e},addQueryParamAtLocation:function(e,t,n){var r=e.split("&");return n=null!=n?n:r.length,r.splice(n,0,t),r.join("&")},isFirstPartyAnalyticsVisitorIDCall:function(e,t,n){return e===H&&(t||(t=m.trackingServer),n||(n=m.trackingServerSecure),!("string"!=typeof(r=m.loadSSL?n:t)||!r.length)&&r.indexOf("2o7.net")<0&&r.indexOf("omtrdc.net")<0);var r},isObject:function(e){return Boolean(e&&e===Object(e))},removeCookie:function(e){w.remove(e,{domain:m.cookieDomain})},isTrackingServerPopulated:function(){return!!m.trackingServer||!!m.trackingServerSecure},getTimestampInSeconds:function(){return Math.round((new Date).getTime()/1e3)},parsePipeDelimetedKeyValues:function(e){return e.split("|").reduce((function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]),e}),{})},generateRandomString:function(e){e=e||5;for(var t="",n="abcdefghijklmnopqrstuvwxyz0123456789";e--;)t+=n[Math.floor(36*Math.random())];return t},normalizeBoolean:function(e){return"true"===e||"false"!==e&&e},parseBoolean:function(e){return"true"===e||"false"!==e&&null},replaceMethodsWithFunction:function(e,t){for(var n in e)e.hasOwnProperty(n)&&"function"==typeof e[n]&&(e[n]=t);return e}};m._helpers=K;var X=function(e,t){var n=c.document;return{THROTTLE_START:3e4,MAX_SYNCS_LENGTH:649,throttleTimerSet:!1,id:null,onPagePixels:[],iframeHost:null,getIframeHost:function(e){if("string"==typeof e){var t=e.split("/");return t[0]+"//"+t[2]}},subdomain:null,url:null,getUrl:function(){var t,r="http://fast.",i="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(n.location.origin);return this.subdomain||(this.subdomain="nosubdomainreturned"),e.loadSSL&&(r=e.idSyncSSLUseAkamai?"https://fast.":"https://"),t=r+this.subdomain+".demdex.net/dest5.html"+i,this.iframeHost=this.getIframeHost(t),this.id="destination_publishing_iframe_"+this.subdomain+"_"+e.idSyncContainerID,t},checkDPIframeSrc:function(){var t="?d_nsid="+e.idSyncContainerID+"#"+encodeURIComponent(n.location.href);"string"==typeof e.dpIframeSrc&&e.dpIframeSrc.length&&(this.id="destination_publishing_iframe_"+(e._subdomain||this.subdomain||(new Date).getTime())+"_"+e.idSyncContainerID,this.iframeHost=this.getIframeHost(e.dpIframeSrc),this.url=e.dpIframeSrc+t)},idCallNotProcesssed:null,doAttachIframe:!1,startedAttachingIframe:!1,iframeHasLoaded:null,iframeIdChanged:null,newIframeCreated:null,originalIframeHasLoadedAlready:null,iframeLoadedCallbacks:[],regionChanged:!1,timesRegionChanged:0,sendingMessages:!1,messages:[],messagesPosted:[],messagesReceived:[],messageSendingInterval:q.POST_MESSAGE_ENABLED?null:100,onPageDestinationsFired:[],jsonForComparison:[],jsonDuplicates:[],jsonWaiting:[],jsonProcessed:[],canSetThirdPartyCookies:!0,receivedThirdPartyCookiesNotification:!1,readyToAttachIframePreliminary:function(){return!(e.idSyncDisableSyncs||e.disableIdSyncs||e.idSyncDisable3rdPartySyncing||e.disableThirdPartyCookies||e.disableThirdPartyCalls)},readyToAttachIframe:function(){return this.readyToAttachIframePreliminary()&&(this.doAttachIframe||e._doAttachIframe)&&(this.subdomain&&"nosubdomainreturned"!==this.subdomain||e._subdomain)&&this.url&&!this.startedAttachingIframe},attachIframe:function(){function e(){(i=n.createElement("iframe")).sandbox="allow-scripts allow-same-origin",i.title="Adobe ID Syncing iFrame",i.id=r.id,i.name=r.id+"_name",i.style.cssText="display: none; width: 0; height: 0;",i.src=r.url,r.newIframeCreated=!0,t(),n.body.appendChild(i)}function t(e){i.addEventListener("load",(function(){i.className="aamIframeLoaded",r.iframeHasLoaded=!0,r.fireIframeLoadedCallbacks(e),r.requestToProcess()}))}this.startedAttachingIframe=!0;var r=this,i=n.getElementById(this.id);i?"IFRAME"!==i.nodeName?(this.id+="_2",this.iframeIdChanged=!0,e()):(this.newIframeCreated=!1,"aamIframeLoaded"!==i.className?(this.originalIframeHasLoadedAlready=!1,t("The destination publishing iframe already exists from a different library, but hadn't loaded yet.")):(this.originalIframeHasLoadedAlready=!0,this.iframeHasLoaded=!0,this.iframe=i,this.fireIframeLoadedCallbacks("The destination publishing iframe already exists from a different library, and had loaded alresady."),this.requestToProcess())):e(),this.iframe=i},fireIframeLoadedCallbacks:function(e){this.iframeLoadedCallbacks.forEach((function(t){"function"==typeof t&&t({message:e||"The destination publishing iframe was attached and loaded successfully."})})),this.iframeLoadedCallbacks=[]},requestToProcess:function(t){function n(){i.jsonForComparison.push(t),i.jsonWaiting.push(t),i.processSyncOnPage(t)}var r,i=this;if(t===Object(t)&&t.ibs)if(r=JSON.stringify(t.ibs||[]),this.jsonForComparison.length){var o,a,u,c=!1;for(o=0,a=this.jsonForComparison.length;o=o&&(e.splice(i,1),i--);return{dataPresent:a,dataValid:u}},manageSyncsSize:function(e){if(e.join("*").length>this.MAX_SYNCS_LENGTH)for(e.sort((function(e,t){return parseInt(e.split("-")[1],10)-parseInt(t.split("-")[1],10)}));e.join("*").length>this.MAX_SYNCS_LENGTH;)e.shift()},fireSync:function(t,n,r,i,o,a){var u=this;if(t){if("img"===n.tag){var c,s,l,f,d=n.url,p=e.loadSSL?"https:":"http:";for(c=0,s=d.length;cq.DAYS_BETWEEN_SYNC_ID_CALLS},attachIframeASAP:function(){var e=this;!function t(){e.startedAttachingIframe||(n.body?e.attachIframe():setTimeout(t,30))}()}}}(m,A);m._destinationPublishing=X,m.timeoutMetricsLog=[];var Z,Q={isClientSideMarketingCloudVisitorID:null,MCIDCallTimedOut:null,AnalyticsIDCallTimedOut:null,AAMIDCallTimedOut:null,fieldGroupObj:{},setState:function(e,t){switch(e){case k:!1===t?!0!==this.MCIDCallTimedOut&&(this.MCIDCallTimedOut=!1):this.MCIDCallTimedOut=t;break;case R:!1===t?!0!==this.AnalyticsIDCallTimedOut&&(this.AnalyticsIDCallTimedOut=!1):this.AnalyticsIDCallTimedOut=t;break;case B:!1===t?!0!==this.AAMIDCallTimedOut&&(this.AAMIDCallTimedOut=!1):this.AAMIDCallTimedOut=t}}};m.isClientSideMarketingCloudVisitorID=function(){return Q.isClientSideMarketingCloudVisitorID},m.MCIDCallTimedOut=function(){return Q.MCIDCallTimedOut},m.AnalyticsIDCallTimedOut=function(){return Q.AnalyticsIDCallTimedOut},m.AAMIDCallTimedOut=function(){return Q.AAMIDCallTimedOut},m.idSyncGetOnPageSyncInfo=function(){return m._readVisitor(),m._getField("MCSYNCSOP")},m.idSyncByURL=function(e){if(!m.isOptedOut()){var t=function(e){var t=e.minutesToLive,n="";return(m.idSyncDisableSyncs||m.disableIdSyncs)&&(n=n||"Error: id syncs have been disabled"),"string"==typeof e.dpid&&e.dpid.length||(n=n||"Error: config.dpid is empty"),"string"==typeof e.url&&e.url.length||(n=n||"Error: config.url is empty"),void 0===t?t=20160:(t=parseInt(t,10),(isNaN(t)||t<=0)&&(n=n||"Error: config.minutesToLive needs to be a positive number")),{error:n,ttl:t}}(e||{});if(t.error)return t.error;var n,r,i=e.url,o=encodeURIComponent,a=X;return i=i.replace(/^https:/,"").replace(/^http:/,""),n=S.encodeAndBuildRequest(["",e.dpid,e.dpuuid||""],","),r=["ibs",o(e.dpid),"img",o(i),t.ttl,"",n],a.addMessage(r.join("|")),a.requestToProcess(),"Successfully queued"}},m.idSyncByDataSource=function(e){if(!m.isOptedOut())return e===Object(e)&&"string"==typeof e.dpuuid&&e.dpuuid.length?(e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid,m.idSyncByURL(e)):"Error: config or config.dpuuid is empty"},function(e,t){e.publishDestinations=function(n){var r=arguments[1],i=arguments[2];try{i="function"==typeof i?i:n.callback}catch(e){i=function(){}}var o=t;if(o.readyToAttachIframePreliminary()){if("string"==typeof n){if(!n.length)return void i({error:"subdomain is not a populated string."});if(!(r instanceof Array&&r.length))return void i({error:"messages is not a populated array."});var a=!1;if(r.forEach((function(e){"string"==typeof e&&e.length&&(o.addMessage(e),a=!0)})),!a)return void i({error:"None of the messages are populated
