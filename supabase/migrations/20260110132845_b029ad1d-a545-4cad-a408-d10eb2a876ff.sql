-- Add integration settings and feature toggles to brand_settings
ALTER TABLE public.brand_settings 
ADD COLUMN IF NOT EXISTS enabled_features JSONB DEFAULT '{"ai_credit_coach": true, "ai_goal_roadmap": true, "ai_smart_prioritization": true, "ai_dispute_predictor": true, "ai_bureau_forecaster": true, "score_simulator": true, "round_manager": true, "document_vault": true, "messaging": true, "billing": true, "analytics": true, "compliance_logs": true}'::jsonb,
ADD COLUMN IF NOT EXISTS integrations JSONB DEFAULT '{"stripe": {"enabled": false, "api_key": null}, "zapier": {"enabled": false, "webhook_url": null}, "mailchimp": {"enabled": false, "api_key": null, "list_id": null}, "twilio": {"enabled": false, "account_sid": null, "auth_token": null, "phone_number": null}, "sendgrid": {"enabled": false, "api_key": null}, "hubspot": {"enabled": false, "api_key": null}, "calendly": {"enabled": false, "url": null}, "google_analytics": {"enabled": false, "tracking_id": null}, "facebook_pixel": {"enabled": false, "pixel_id": null}, "intercom": {"enabled": false, "app_id": null}, "zendesk": {"enabled": false, "subdomain": null}}'::jsonb,
ADD COLUMN IF NOT EXISTS client_portal_config JSONB DEFAULT '{"show_scores": true, "show_disputes": true, "show_documents": true, "show_billing": true, "show_messages": true, "show_ai_tools": true, "show_progress": true, "allow_document_upload": true, "allow_dispute_requests": true}'::jsonb,
ADD COLUMN IF NOT EXISTS notification_settings JSONB DEFAULT '{"email_notifications": true, "sms_notifications": false, "score_change_alerts": true, "dispute_updates": true, "billing_reminders": true, "marketing_emails": false}'::jsonb,
ADD COLUMN IF NOT EXISTS subscription_features JSONB DEFAULT '{"max_clients": null, "max_staff": null, "max_disputes_per_month": null, "white_label_enabled": true, "api_access": false, "priority_support": false, "custom_integrations": false}'::jsonb;